/*
 * ***** BEGIN LICENSE BLOCK *****
 * Zimbra Collaboration Suite Web Client
 * Copyright (C) 2013 Zimbra Software, LLC.
 *
 * The contents of this file are subject to the Zimbra Public License
 * Version 1.4 ("License"); you may not use this file except in
 * compliance with the License.  You may obtain a copy of the License at
 * http://www.zimbra.com/license.
 *
 * Software distributed under the License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.
 * ***** END LICENSE BLOCK *****
 */
$contactBkgdColor: $white;

/* 1rem typically equals 16px */
$listViewMargin: 0.5rem;
$contactListHeight: 5rem;  /* 80px */
$contactListImageSize: 3.25rem;  /* 52px */
$contactListStdMargin: $contactListHeight / 2 - $contactListImageSize / 2;
$contactListLeftIndent: $contactListImageSize + $contactListStdMargin * 2;
$contactListRightIndent: $contactListStdMargin;
$contactListTopOffset: $contactListStdMargin - 0.25rem;

$contactBaseFontSize: $formDisplayBaseFontSize;
$contactTitleBarHeight: 2.5rem;
$contactGutter: $formDisplayGutter;
$contactImageSize: 8rem - $contactGutter;
$contactImageSizePhone: $contactImageSize * 0.5;
$contactEditImageSize: 5rem;
$contactStdMargin: 0.7rem;
$contactListImageTopOffset: $contactListHeight / 2 - $contactListImageSize / 2;
$contactButtonSize: $contactImageSize / 1.5;
$contactFieldTopOffset: $contactImageSize + $contactStdMargin * 4;
$contactFieldTopOffsetPhone: $contactImageSizePhone + $contactStdMargin * 6;
$contactFieldWidth: $formDisplayFieldWidth;
$contactFormButtonMinHeight: 2.5rem;

$contactGroupMemberWidth: 17em;
$contactGroupMemberHeight: $contactBaseFontSize * 5.25;
$contactGroupMemberPadding: $contactBaseFontSize * 0.5;
$contactGroupMemberImageSize: 3.25rem;
$contactGroupMemberImageRadius: $contactGroupMemberImageSize / 2;


/* Contact Image Base Classes */

.zcs-contactImage {
	background-position: center;
	background-position: center;
	background-size: contain;
	background-repeat: no-repeat;
	@include border-radius($contactImageSize / 2);
}

.zcs-contactImage-person {
	@extend .zcs-contactImage; 
	background-image: url('../images/person.png');
}

.zcs-contactImage-group {
	@extend .zcs-contactImage; 
	background-image: url('../images/group.png');
}

.zcs-contactListImage {
	height: $contactListImageSize;
	margin-left: $contactListStdMargin;
	margin-top: $contactListHeight / 2 - $contactListImageSize / 2;
	width: $contactListImageSize;
}

/* Generic Classes */

.zcs-floatLeft {
	float: left;
}

.zcs-floatRight {
	float: right;
}

.zcs-newLine {
	@extend .zcs-floatLeft;
	clear: left;
}

/* Contact List Classes */

.zcs-list-panel .x-list .x-list-item {
	.x-innerhtml:before {
		content: "";
	}

	&.x-item-pressed {
		@extend .zcs-list-item-pressed;
//		background: lighten($list-active-color,10);
		border-top-color: lighten($list-active-color,10);
//		color: $primary-text-color;
	}

	&.x-item-selected.x-list-item-tpl {
		@extend .zcs-list-item-selected;
//		background: $list-active-color;
		border-top-color: $list-active-color;
//		color: $white;
	}

	.zcs-contactListItem {
		min-height: $contactListHeight - $listViewMargin * 2;
		margin-top: 8px; // accounts for 7px padding and 1px top border
	}

	.zcs-contactList-person {
		@extend .zcs-contactListImage;
		@extend .zcs-contactImage-person;
	}

	.zcs-contactList-group {
		@extend .zcs-contactListImage;
		@extend .zcs-contactImage-group;
	}

	.zcs-contactList-text {
		position: absolute;
		bottom: $contactListTopOffset;
		left: $contactListLeftIndent;
		right: $contactListRightIndent;
		top: $contactListTopOffset;

		DIV {
			@include ellipsis();
			line-height: 1.5rem;
			width: 100%;
		}
		.zcs-contactList-name {
			font-size: 1.2rem;
		}
		.zcs-contactList-groupName {
			font-size: 1.2rem;
	//		margin-bottom: 0.6rem;
			margin-top: 0.75rem;
		}
		.zcs-contactList-title {
			@include opacity(.75);
			font-size: 1rem;
		}
	}

	.zcs-swipe-delete {
		background-color: red;
		border-color: darkred;
		color: white;
		@include box-shadow(white 0px 0px 5px 10px);
	}
}

/* Contact View Classes */

.zcs-item-panel {
	.zcs-contactview {
		background-color: $contactBkgdColor;

		.x-innerhtml {
			padding-top: $contactTitleBarHeight + $contactGutter;
			padding-right: $contactGutter / 2;
			padding-bottom: $contactGutter;
			padding-left: $contactGutter / 2;
		}
	}
}

.zcs-contactview-header {
	font-size: $contactBaseFontSize;

	.zcs-contactview-image {
		@extend .zcs-floatLeft;
		@extend .zcs-contactImage-person;
		height: $contactImageSize;
		width: $contactImageSize;
	}

	.zcs-contactview-personalInfo {					// Tested iPad Mini
		@extend .zcs-floatLeft;
		margin-left: $contactGutter;
		width: 76%;

		SPAN {
			@extend .zcs-newLine;
			//@include ellipsis();
			margin-bottom:.25em;
			max-width: $contactFieldWidth;
			min-width: $contactFieldWidth / 2;
		}

		SPAN[name=contactname] {
			font-size: 1.5em;
			margin: .5em 0;
		}
	}
}

// iOS - TABLET - PORTRAIT
// Tested iPad Mini
.x-portrait .zcs-contactview-header {
	.zcs-contactview-personalInfo {

		SPAN {
			max-width: $contactFieldWidth * 1.1;
			min-width: $contactFieldWidth / 2;
		}
	}
}

// ANDROID - TABLET - PORTRAIT
// Tested Nexus 7 and Nexus 10
.x-android.x-portrait .zcs-contactview-header {
	.zcs-contactview-personalInfo {
		width: 68%;
	}
}

// iOS - PHONE - LANDSCAPE
// Tested iPod Touch - gen 5 - may need to be smaller for pre-gen 5
.x-phone .zcs-contactview-header {
	font-size: $contactBaseFontSize * 0.9;

	.zcs-contactview-image {
		height: $contactImageSizePhone;
		width: $contactImageSizePhone;
	}

	.zcs-contactview-personalInfo {
		width: 80%;

		SPAN {
			max-width: $contactFieldWidth * 0.95;
			min-width: $contactFieldWidth * 0.5;
		}
	}
}

// iOS - PHONE - PORTRAIT
// Tested iPod Touch - gen 5
.x-phone.x-portrait .zcs-contactview-header {
	.zcs-contactview-personalInfo {
		width: 64%;

		SPAN {
			max-width: $contactFieldWidth * 0.55;
			min-width: $contactFieldWidth * 0.4;
		}
	}
}

// ANDROID - PHONE - LANDSCAPE
// Tested Samsung Galaxy Nexus
.x-android.x-phone .zcs-contactview-header {
	.zcs-contactview-personalInfo {
		// No change - width: 80%;
	}
}

// ANDROID - PHONE - PORTRAIT
// Tested Samsung Galaxy Nexus
.x-android.x-phone .zcs-contactview-header {
	.zcs-contactview-personalInfo {
		width: 75%;
	}
}

.zcs-contactview-fieldSets {
	font-size: $contactBaseFontSize;
	margin-top: $contactFieldTopOffset;

	.zcs-contactview-fieldSet {
		@extend .zcs-newLine;
		margin-bottom: 1em;

		.zcs-contactview-label {
			@extend .zcs-floatLeft;
			@include ellipsis();
			@include opacity(.5);
			margin-left: 0.75em;
			text-align: right;
			width: $contactImageSize;

			&:after {
//				content: ":";
			}
		}

		.zcs-contactview-fields {
			@extend .zcs-floatLeft;

			.zcs-contactview-field {
				@extend .zcs-newLine;
				@include ellipsis();
				margin: 0 1em 1.5em $contactGutter;
				max-width: $contactFieldWidth * 2;
				min-width: $contactFieldWidth;
			}

			.zcs-contactview-street,
			.zcs-contactview-city,
			.zcs-contactview-country {
				@extend .zcs-newLine;
			}
			.zcs-contactview-state,
			.zcs-contactview-postalcode {
				@extend .zcs-floatLeft;
			}
		}

		.zcs-contactview-subLabel {
			@extend .zcs-floatLeft;
			@include ellipsis();
			@include opacity(.4);
		}
	}
}

.x-phone .zcs-contactview-fieldSets {
	font-size: $contactBaseFontSize * 0.9;
	margin-top: $contactFieldTopOffsetPhone;

	.zcs-contactview-label {
		width: $contactImageSizePhone;
	}

	.zcs-contactview-fields .zcs-contactview-field {
		max-width: $contactFieldWidth;
		min-width: $contactFieldWidth * 0.5;
	}

}

.x-phone.x-portrait {
	.zcs-contactview-fieldSets .zcs-contactview-fields .zcs-contactview-field {
		max-width: $contactFieldWidth * 0.57;
		min-width: $contactFieldWidth * 0.43;
	}
}

/* Create Contact Classes */

.zcs-contact-imgborder {
	background-color: white;

	.zcs-contact-image {
		@extend .zcs-contactImage-person;
		height: $contactEditImageSize;
		margin: 0.5em auto auto;
		width: $contactEditImageSize;
	}
}

.x-phone {
	.zcs-contact-imgborder {
		width:0;

		.zcs-contact-image {
			display: none;
		}
	}
}

.x-webkit .x-layout-box.x-vertical>.x-layout-box-item.x-flexed.zcs-contact-spacer {
	background-color: #DDD;
	height: 1em !important;
	width: 100% !important;
	border: none;
}

/* Contact Group Classes */

.zcs-contactgroupview-header {

	.zcs-contactgroupview-image {
		@extend .zcs-floatLeft;
		@extend .zcs-contactImage-group;
		height: $contactImageSize;
		width: $contactImageSize;
	}

	.zcs-contactgroupview-personalInfo {
		@extend .zcs-floatLeft;
		margin-left: $contactGutter;
		margin-top: $contactBaseFontSize * 1.5;

		SPAN {
			@extend .zcs-newLine;
			@include ellipsis();
			margin-bottom: 0.25rem;
			max-width: $contactFieldWidth * 1.5;
			min-width: $contactFieldWidth;

			&[name=contactname] {
				font-size: 1.8rem;
				font-weight: bold;
				margin: 0.5rem 0;
			}
		}
	}
}

.zcs-contactgroupview-members {
	@extend .zcs-floatLeft;
	margin-top: 1rem;
	width: 100%;

	.zcs-contactgroupview-member {
		@extend .zcs-floatLeft;
		border: 1px solid rgba(0,0,0,.4);
		border-radius: $contactBaseFontSize / 2;
		min-height: $contactGroupMemberHeight;
		margin: 0 1.5rem 1rem 0;
		overflow: hidden;
		position: relative;
		width: $contactGroupMemberWidth;

		.zcs-contact-image {
			@extend .zcs-contactImage-person;
			border-radius: $contactGroupMemberImageRadius;
			height: $contactGroupMemberImageSize;
			left: $contactGroupMemberPadding;
			position:absolute;
			top: $contactGroupMemberHeight / 2 - $contactGroupMemberImageSize /2;
			width: $contactGroupMemberImageSize;
		}

		.zcs-contact-info {
			left: $contactGroupMemberImageSize + $contactGroupMemberPadding * 2;
			position: absolute;
			right: 0;
			top: $contactGroupMemberPadding;

			SPAN {
				@extend .zcs-newLine;
				font-size: $contactBaseFontSize * 0.9;
				line-height: $contactBaseFontSize * 1.4;
				width: 100%;
				word-wrap: break-word;
				@include ellipsis();

				&[name=contactname] {
					font-size: $contactBaseFontSize;
					font-weight: bold;
					line-height: $contactBaseFontSize * 1.5;
				}
			}
		}
	}
}

.contact-form-remove-field-button,
.contact-form-add-field-button {
	min-height: $contactFormButtonMinHeight;
}
